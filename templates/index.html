<!-- Code by Sergio00166 -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>webFILE server</title>
    <link rel="icon" type="image/x-icon" href="{{ url_for('index', static='ico/favicon.ico') }}">
    <link rel="stylesheet" href="{{ url_for('index', static='css/index.css') }}">
    <script defer src="{{ url_for('index', static='js/index.js') }}"></script>
</head>
<body>
    <div id="loader" style="display: none;">
        <div class="load_container">
            <h1>Processing</h1>
            <div class="progress-bar"></div>
            <h1 id="progress"></h1>
        </div>
    </div>
    
    <div class="main-container">
        <button class="sidebar-toggle" onclick="toggleSidebar()" title="Toggle Sidebar">
            <img src="{{ url_for('index', static='svg/index/bars-solid.svg') }}"> 
        </button>

        <div id="sidebar">
            <div class="sidebar-content">

                <div class="sidebar-section">
                    <h3>Sort</h3>
                    <button class="sidebar-button" id="sortName" onclick="changeURL('{% if sort=='np' %}nd{% else %}np{% endif %}')" title="(1)">
                        {% if sort=="np" %}‚¨ÜÔ∏è{% elif sort=="nd" %}‚¨áÔ∏è{% else %}‚óªÔ∏è{% endif %}&nbsp;&nbsp;Name
                    </button>
                    <button class="sidebar-button" id="sortSize" onclick="changeURL('{% if sort=='sp' %}sd{% else %}sp{% endif %}')" title="(2)">
                        {% if sort=="sp" %}‚¨ÜÔ∏è{% elif sort=="sd" %}‚¨áÔ∏è{% else %}‚óªÔ∏è{% endif %}&nbsp;&nbsp;Size
                    </button>
                    <button class="sidebar-button" id="sortDate" onclick="changeURL('{% if sort=='dp' %}dd{% else %}dp{% endif %}')" title="(3)">
                        {% if sort=="dp" %}‚¨ÜÔ∏è{% elif sort=="dd" %}‚¨áÔ∏è{% else %}‚óªÔ∏è{% endif %}&nbsp;&nbsp;Date
                    </button>
                </div>
                
                <div class="sidebar-section">
                    <h3>Selection</h3>
                    <button class="sidebar-button" id="selectBtn" onclick="toggleSelectMode()" title="(s)">‚úÖ Select Mode</button>
                    <button class="sidebar-button" id="invertBtn" onclick="invertSelection()" title="(a)" disabled>üîÑ Invert Selection</button>
                    <button class="sidebar-button" onclick="executeDownloads()" title="(d)">üì• Download</button>
                </div>

                <div class="sidebar-section">
                    <h3>Manage</h3>
                    <button class="sidebar-button" onclick="mkdir()" title="(m)">üìÅ New Folder</button>
                    <button class="sidebar-button" onclick="openFileMenu()" title="(u)">üì§ Upload Files</button>
                    <button class="sidebar-button" onclick="openFileMenu(true)" title="(f)">üì§ Upload Folder</button>
                    <button class="sidebar-button" id="delBtn" onclick="executeDeletes()" title="(r)" disabled>üóëÔ∏è Delete</button>
                </div>
                
                <div class="sidebar-section">
                    <h3>Actions</h3>
                    <button class="sidebar-button" id="copyBtn" onclick="copyFiles()" title="(c)" disabled>üìã Copy</button>
                    <button class="sidebar-button" id="moveBtn" onclick="moveFiles()" title="(x)" disabled>‚úÇÔ∏è Move</button>
                    <button class="sidebar-button" id="renBtn" onclick="renameFiles()" title="(n)" disabled>‚úèÔ∏è Rename</button>
                    <button class="sidebar-button" onclick="pasteFiles()" title="(p)">üìã Paste</button>
                </div>
                
                <div class="sidebar-section">
                    <h3>Account</h3>
                    {% if 'user' in session %}
                        <button class="sidebar-button" id="login" onclick='window.location.href="?logout"' title="(l)">üö™ Logout</button>
                    {% else %}
                        <button class="sidebar-button" id="login" onclick='window.location.href="?login"' title="(l)">üîë Login</button>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <div class="content-area">
            <div class="path-bar">
                <span id="backdir" onclick="window.location.href='{{ url_for('explorer', path=parent_directory) }}'" title="Parent">
                    <img src="/?static=svg/index/arrow-left-solid.svg">
                </span>
                <span onclick="window.location.href='{{ url_for('explorer', path='') }}'" title="Index">
                    <img src="/?static=svg/index/house-chimney-solid.svg">
                </span>
                <div class="path-title">{{ folder_path }}</div>
            </div>
            <div class="list-group">
                {% for item in folder_content %}
                    <div id="{{ loop.index0 }}" class="filename" data-value="{{ url_for('explorer', path=item['path']) }}"{% if item['type'] in ['directory','disk'] %} isdir="" {% endif %} tabindex="0">
                    {% if item['type'] == 'disk' %}
                        <img src="{{ url_for('index', static='svg/index/hard-drive-solid.svg') }}" class="disk">
                    {% elif item['type'] == 'directory' %}
                        <img src="{{ url_for('index', static='svg/index/folder-solid.svg') }}" class="folder">
                    {% elif item['type'] == 'source' %}
                        <img src="{{ url_for('index', static='svg/index/file-code-solid.svg') }}" class="src">
                    {% elif item['type'] == 'video' %}
                        <img src="{{ url_for('index', static='svg/index/film-solid.svg') }}" class="default">
                    {% elif item['type'] == 'audio' %}
                        <img src="{{ url_for('index', static='svg/index/music-solid.svg') }}" class="default">
                    {% elif item['type'] == 'text' %}
                        <img src="{{ url_for('index', static='svg/index/file-lines-solid.svg') }}" class="files">
                    {% elif item['type'] == 'pdf' %}
                        <img src="{{ url_for('index', static='svg/index/file-pdf-solid.svg') }}" class="pdf">
                    {% elif item['type'] == 'photo' %}
                        <img src="{{ url_for('index', static='svg/index/image-solid.svg') }}" class="default">
                    {% elif item['type'] == 'document' %}
                        <img src="{{ url_for('index', static='svg/index/file-word-solid.svg') }}" class="doc">
                    {% elif item['type'] == 'database' %}
                        <img src="{{ url_for('index', static='svg/index/database-solid.svg') }}" class="default">
                    {% elif item['type'] == 'presentation' %}
                        <img src="{{ url_for('index', static='svg/index/file-powerpoint-solid.svg') }}" class="pp">
                    {% elif item['type'] == 'virtualdisk' %}
                        <img src="{{ url_for('index', static='svg/index/compact-disc-solid.svg') }}" class="iso">
                    {% elif item['type'] == 'compressed' %}
                        <img src="{{ url_for('index', static='svg/index/file-zipper-solid.svg') }}" class="zip">
                    {% elif item['type'] == 'binary' %}
                        <img src="{{ url_for('index', static='svg/index/file-binary.svg') }}">
                    {% elif item['type'] == 'webpage' %}
                        <img src="{{ url_for('index', static='svg/index/globe-solid.svg') }}" class="iso">
                    {% else %}
                        <img src="{{ url_for('index', static='svg/index/file-solid.svg') }}" class="files">
                    {% endif %}
                        <span class="name"> <pre>{{ item['name'] }}</pre> </span>
                        <span>
                            <t class="size">{{ item['size'] }}</t>
                            {% if item['type'] == 'disk' %}
                                <t class="capacity">&nbsp;/&nbsp;{{item['capacity']}}</t>
                                <t class="time">({{item["used"]}}%)</t>
                            {% else %}
                                <t class="date">{{ item['mtime'][0] }}</t>
                                <t class="time">{{ item['mtime'][1] }}</t>
                            {% endif %}
                        </span>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
</body>
</html>

